#!/usr/bin/env python


DD="""
from:
  http://fchabaud.free.fr/English/Poly/randomform.php?FDeg=24&LDeg=64&Output=HGF%282%29%2FPrimitive


    X24+X20+X19+X18+X14+X12+X10+X8+1
    X24+X16+X15+X11+X10+X9+X7+X3+X2+X+1
    X24+X23+X21+X18+X16+X15+X9+X8+1
    X24+X16+X15+X11+X10+X9+X8+X6+X3+X+1
    X24+X23+X22+X20+X19+X12+X10+X9+X8+X7+1
    X24+X23+X22+X19+X16+X15+X14+X13+X11+X8+1
    X24+X22+X19+X18+X16+X12+X11+X10+X8+X7+1
    X24+X17+X16+X15+X13+X11+X10+X5+X4+X2+1
    X24+X23+X21+X20+X15+X14+X13+X12+X11+X9+1
    X24+X17+X14+X12+X11+X8+X5+X3+X2+X+1
    X24+X17+X15+X14+X13+X12+X8+X7+X6+X2+1
    X24+X17+X16+X9+X8+X7+X6+X4+1
    X24+X23+X22+X21+X20+X18+X15+X10+X9+X8+1
    X24+X23+X19+X18+X17+X13+X9+X8+1
    X24+X22+X20+X19+X18+X17+X12+X11+X10+X8+1
    X24+X22+X21+X18+X16+X15+X13+X11+X10+X9+1
    X24+X16+X8+X7+X6+X5+X3+X+1
    X24+X16+X14+X13+X12+X11+X9+X8+X7+X5+X4+X2+1
    X24+X23+X22+X21+X19+X17+X15+X14+X13+X12+X11+X10+X9+X6+1
    X24+X20+X19+X18+X17+X14+X9+X7+1
    X24+X15+X10+X9+X7+X3+1
    X24+X23+X22+X20+X18+X17+X14+X9+1
    X24+X23+X21+X18+X16+X15+X13+X12+X11+X10+X9+X6+1
    X24+X22+X21+X17+X15+X13+X12+X10+X8+X6+1
    X24+X17+X16+X14+X13+X10+X9+X6+X5+X4+1
    X24+X23+X21+X19+X18+X16+X13+X11+X10+X9+1
    X24+X18+X14+X12+X9+X8+X3+X2+1
    X24+X21+X19+X18+X17+X16+X15+X14+X9+X6+1
    X24+X23+X20+X17+X16+X15+X12+X11+X10+X8+1
    X24+X16+X15+X14+X11+X9+X8+X6+X3+X+1
    X24+X18+X13+X8+X5+X4+1
    X24+X20+X19+X18+X15+X13+X11+X6+1
    X24+X20+X19+X16+X14+X11+X9+X8+1
    X24+X16+X12+X11+X10+X9+X8+X7+X4+X2+1
    X24+X19+X14+X13+X12+X8+X6+X2+1
    X24+X15+X13+X11+X10+X8+X5+X2+1
    X24+X20+X19+X18+X17+X16+X15+X12+X10+X7+1
    X24+X16+X15+X14+X11+X10+X9+X8+X7+X6+X4+X3+X2+X+1
    X24+X21+X20+X17+X16+X13+X11+X10+X7+X6+1
    X24+X23+X20+X19+X18+X17+X15+X12+X11+X9+X7+X6+1
    X24+X22+X19+X16+X15+X14+X11+X7+1
    X24+X17+X16+X13+X12+X9+X7+X6+X4+X3+X2+X+1
    X24+X22+X20+X19+X17+X16+X13+X9+X8+X6+1
    X24+X17+X16+X15+X13+X12+X10+X9+X7+X6+X5+X4+X2+X+1
    X24+X23+X22+X21+X19+X16+X14+X12+X11+X10+X9+X6+1
    X24+X23+X21+X19+X16+X15+X13+X11+X10+X7+1
    X24+X22+X19+X18+X17+X16+X14+X13+X9+X7+1
    X24+X17+X14+X11+X10+X4+1
    X24+X17+X11+X10+X5+X3+X2+X+1
    X24+X17+X13+X12+X6+X5+X2+X+1
    X24+X19+X17+X16+X15+X8+1
    X24+X22+X17+X16+X12+X10+X9+X8+1
    X24+X16+X13+X11+X10+X8+X6+X3+X2+X+1
    X24+X23+X22+X18+X17+X14+X10+X8+1
    X24+X17+X9+X8+X7+X6+X5+X4+X3+X2+1
    X24+X23+X22+X21+X20+X18+X17+X16+X12+X10+X9+X8+1
    X24+X17+X15+X13+X7+X4+X3+X2+1
    X24+X16+X14+X13+X11+X10+X9+X8+X7+X6+X2+X+1
    X24+X16+X15+X13+X12+X7+X6+X5+X4+X3+X2+X+1
    X24+X22+X21+X16+X12+X7+1
    X24+X21+X20+X19+X17+X15+X14+X13+X10+X7+1
    X24+X16+X15+X11+X9+X6+X2+X+1
    X24+X16+X15+X14+X12+X10+X9+X6+X5+X3+1
    X24+X17+X16+X14+X9+X4+X3+X2+1

"""


import random


def main():
	lp = 0x7FFF
	lp_min = lp_max = 0x7FFF
	rr = 0x00FFFFFF
	poly = getPoly(random.randint(0,63))
	poly = reverseInt(poly,25)>>1
	for i in xrange(1000):
		if rr&1:
			rr = (rr>>1)^poly
		else:
			rr = (rr>>1)
		#print "%06X" % rr

		#lp = ( lp + (rr&0x00FFFF) )>>1
		lp = ( lp + ((rr>>0)&0x001FFF) )>>1

		#print "%06X" % lp
		print "*"*((lp>>8)+1)
		if lp<lp_min:
			lp_min=lp
		if lp>lp_max:
			lp_max=lp
	print "min = %u" % lp_min
	print "max = %u" % lp_max
	print "poly = %04X" % poly



def reverseInt(val,numbits):
	res=0
	for i in xrange(numbits):
		res |= ((val>>i)&1)<<((numbits-1)-i)
	return res


def getPoly(idx):

	for lin in DD.split("\n"):
		lin = lin.strip()
		if lin.startswith("X"):
			if idx>0:
				idx-=1
				continue
			poly=0
			for part in lin.split("+"):
				if part=="1":
					part = "X0"
				elif part=="X":
					part = "X1"
				if part[0]!='X':
					raise "Error! Want string with X<num>"
				print repr(lin)+repr(part)
				pw = int(part[1:].strip())
				if pw>32:
					raise "Power too high"
				poly = poly | (1<<pw)
			return poly

	raise "index out of bounds"


if __name__=="__main__":
	main()

